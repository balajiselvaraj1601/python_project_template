# Copier Template Configuration for Python Data-Science Libraries
# Modern, uv-first, Copilot-optimized template

_min_copier_version: "9.0.0"
_subdirectory: template
_jinja_extensions:
  - jinja2_time.TimeExtension

# Lifecycle: Skip these files on updates to prevent overwriting user changes
_skip_if_exists:
  - pyproject.toml
  - README.md
  - CONTRIBUTING.md
  - src/{{ package_name }}/__init__.py
  - "*.md"

# Questions / Prompts
project_name:
  type: str
  help: Human-readable project name (e.g., "My Data Library")
  placeholder: "My Data Library"

project_slug:
  type: str
  default: "{{ project_name | lower | replace(' ', '-') | replace('_', '-') }}"
  help: Slug for URLs and package distribution

package_name:
  type: str
  default: "{{ project_name | lower | replace(' ', '_') | replace('-', '_') }}"
  help: Python package name (must be valid Python identifier)
  validator: >-
    {% if not package_name.replace('_', '').isalnum() %}
    Package name must be a valid Python identifier (alphanumeric and underscores only)
    {% endif %}

project_description:
  type: str
  help: Short description of the project
  default: "A Python data-science library"

author_name:
  type: str
  help: Author's full name
  default: "Your Name"

author_email:
  type: str
  help: Author's email
  default: "you@example.com"

github_username:
  type: str
  help: GitHub username or organization
  default: "yourusername"

python_min_version:
  type: str
  help: Minimum Python version
  default: "3.11"
  choices:
    - "3.11"
    - "3.12"
    - "3.13"

license:
  type: str
  help: Project license
  default: MIT
  choices:
    - MIT
    - Apache-2.0
    - BSD-3-Clause
    - GPL-3.0
    - Proprietary

include_docs:
  type: bool
  help: Include MkDocs documentation setup?
  default: true

include_hypothesis:
  type: bool
  help: Include Hypothesis for property-based testing?
  default: true

include_pandas_support:
  type: bool
  help: Include pandas in dependencies?
  default: false

include_numpy:
  type: bool
  help: Include NumPy in dependencies?
  default: true

codecov_token:
  type: str
  help: Codecov token (optional, can be added later)
  default: ""
  placeholder: "Leave empty to configure later"

# Computed values
current_year:
  type: str
  default: "{% now 'utc', '%Y' %}"

github_actions_python_versions:
  type: str
  default: >-
    {% if python_min_version == "3.11" -%}
    ["3.11", "3.12", "3.13"]
    {%- elif python_min_version == "3.12" -%}
    ["3.12", "3.13"]
    {%- else -%}
    ["3.13"]
    {%- endif %}

# Post-generation tasks
_tasks:
  - ["git", "init"]
  - ["git", "branch", "-M", "main"]
  - ["uv", "sync"]
  - ["uv", "run", "pre-commit", "install"]
  - ["git", "add", "-A"]
  - ["git", "commit", "-m", "Initial commit from template"]
  - command: echo "âœ… Project {{ project_name }} created successfully!"
  - command: echo "ğŸ“ Location $(pwd)"
  - command: echo "ğŸš€ Run 'just ci' to verify everything works"
