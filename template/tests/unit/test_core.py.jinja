"""Unit tests for core functionality."""

{% if include_numpy %}
import numpy as np
{% endif %}
{% if include_pandas_support %}
import pandas as pd
{% endif %}
import pytest

from {{ package_name }}.core import example_function
{% if include_numpy %}
from {{ package_name }}.core import example_array_function
{% endif %}
{% if include_pandas_support %}
from {{ package_name }}.core import example_dataframe_function
{% endif %}


def test_example_function_with_int() -> None:
    """Test example_function with an integer."""
    assert example_function(42) == 42


def test_example_function_with_string() -> None:
    """Test example_function with a string."""
    assert example_function("hello") == "hello"


def test_example_function_with_list() -> None:
    """Test example_function with a list."""
    input_list = [1, 2, 3]
    assert example_function(input_list) == input_list


{% if include_numpy %}
def test_example_array_function() -> None:
    """Test example_array_function with a simple array."""
    arr = np.array([1.0, 2.0, 3.0])
    result = example_array_function(arr)
    expected = np.array([1.0, 4.0, 9.0])
    np.testing.assert_array_equal(result, expected)


def test_example_array_function_negative() -> None:
    """Test example_array_function with negative values."""
    arr = np.array([-1.0, -2.0, -3.0])
    result = example_array_function(arr)
    expected = np.array([1.0, 4.0, 9.0])
    np.testing.assert_array_equal(result, expected)
{% endif %}


{% if include_pandas_support %}
def test_example_dataframe_function() -> None:
    """Test example_dataframe_function returns a copy."""
    df = pd.DataFrame({"a": [1, 2, 3], "b": [4, 5, 6]})
    result = example_dataframe_function(df)

    # Should be equal but not the same object
    pd.testing.assert_frame_equal(result, df)
    assert result is not df


def test_example_dataframe_function_empty() -> None:
    """Test example_dataframe_function with an empty DataFrame."""
    df = pd.DataFrame()
    result = example_dataframe_function(df)
    pd.testing.assert_frame_equal(result, df)
{% endif %}
